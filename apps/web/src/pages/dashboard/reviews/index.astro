---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import { ReviewsList } from '@/components/reviews/ReviewsList';

const user = Astro.locals.user;
const supabase = Astro.locals.supabase;

const { data: reviews, error } = await supabase
  .from('review_sessions')
  .select('*')
  .eq('user_id', user!.id)
  .order('created_at', { ascending: false })
  .limit(50);

if (error) {
  console.error('Error fetching reviews:', error);
}
---

<DashboardLayout title="Reviews">
  <ReviewsList client:load reviews={reviews || []} />
</DashboardLayout>
